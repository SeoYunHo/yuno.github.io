---
layout: post
title: Redux에 대한 이해 1
date: 2017-11-19
excerpt: "Redux에 대해서 알아봅시다."
tags: [js, post, react, flux]
comments: true
---

이번 시간에는 Redux에 대해서 알아보겠습니다.

## Flux를 왜 바꿔야 되나?

우리는 저번에 Flux 아키텍처에 대해서 배웠습니다.

그렇다면 Flux 아키텍처가 있는데 왜 Redux를 사용해야 될까요?

결론부터 말하면, Redux는 기존의 Flux가 해결할 수 있는 문제점보다 더 많은 문제점을 해결할 수 있습니다.

Redux와 Flux는 상태를 저장하고 있는 스토어에 접근자(getter)만 있고, 설정자(setter)는 없으므로 직접적으로 상태를 바꿀 방법이 없다는 점에서 비슷합니다.

하지만 Flux로는 처리할 수 없는 문제가 몇가지 있습니다.

먼저 스토어의 코드는 애플리케이션 상태를 삭제하지 않고는 리로딩이 불가능하다는 것입니다.

Flux의 Store는 다음 두가지를 가지고 있습니다.

1. 상태 변환을 위한 로직
2. 현재 어플리케이션 상태

이러한 특성 때문에 핫 리로딩을 할 때 문제가 발생합니다. 

새로운 상태 변환 로직을 위해 스토어를 리로딩을 하게 되면 기존의 있었던 상태를 잃어버리고, 이벤트 구독까지 망가져 버리게 됩니다.

이를 해결하기 위해서 Redux는 객체를 두개로 나누었습니다.

하나의 객체는 애플리케이션의 상태만을 가지게 하고, 이 객체를 리로딩을 막습니다.

그리고 또 다른 객체에 모든 상태 변환 로직을 가지도록하면 이러한 문제를 해결할 수 있습니다.

두 번째는 애플리케이션 상태는 매 액션마다 재기록 된다는 것입니다.

시간 여행 디버깅을 위해서는 상태 객체의 모든 버전들을 기록해두어야 합니다.

그렇게 하려면 매번 상태가 새로 바뀔 때마다 이전 애플리케이션 상태를 상태 객체의 버전들을 저장하는 배열에 추가해야 합니다. 

하지만 이 방식으로는 애플리케이션 상태의 스냅샷(snapshot)을 생성하는게 아니라 같은 객체를 가리키게 됩니다.

제대로 동작하게 만들기 위해서는, 각각의 버전이 서로 다른 객체를 가지고 있어야 됩니다. 

액션이 스토어로 전달되었을때 기존의 애플리케이션 상태를 수정하는 대신, 그 상태를 복사한 뒤 복사본을 수정하면 됩니다. 

## 마무리

이번 시간에는 Flux 아키텍쳐를 바꿔야되는 이유에 대해서 알았습니다.

다음시간에는 Redux의 데이터 흐름에 대해서 알아보겠습니다.

### 참고

```
redux 카툰 안내서: https://bestalign.github.io/2015/10/26/cartoon-intro-to-redux/
```